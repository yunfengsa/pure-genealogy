# æ—è°±ç®¡ç†ç³»ç»Ÿ

<p align="center">
  <img alt="pure-genealogy Tree" src="app/opengraph-image.png" width="800">
</p>

<p align="center">
  ä¸€ä¸ªåŸºäº Next.js 15 å’Œ Supabase æ„å»ºçš„ç°ä»£åŒ–å®¶æ—æ—è°±ç®¡ç†ç³»ç»Ÿã€‚
</p>

## âœ¨ é¡¹ç›®äº®ç‚¹

- **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: é‡‡ç”¨æœ€æ–°çš„ Next.js 15 (App Router) å’Œ React 19ã€‚
- **å…¨æ ˆè§£å†³æ–¹æ¡ˆ**: åç«¯ä½¿ç”¨ Supabaseï¼Œæä¾›æ•°æ®åº“ã€è®¤è¯å’Œå®æ—¶åŠŸèƒ½ã€‚
- **ä¼˜é›…çš„ UI è®¾è®¡**: åŸºäº shadcn/ui å’Œ Tailwind CSSï¼Œæ”¯æŒæ˜æš—æ¨¡å¼åˆ‡æ¢ã€‚
- **å¯è§†åŒ–æ—è°±**: ä½¿ç”¨ React Flow (@xyflow/react) è‡ªåŠ¨ç”ŸæˆåŠ¨æ€äº¤äº’çš„å®¶æ—æ ‘å½¢å›¾ã€‚
- **å®Œå¤‡çš„åŠŸèƒ½**: æ”¯æŒå®¶æ—æˆå‘˜çš„å¢åˆ æ”¹æŸ¥ã€æœç´¢ã€åˆ†é¡µç­‰åŠŸèƒ½ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: [Next.js 15](https://nextjs.org/) (App Router, Server Actions)
- **æ•°æ®åº“ & è®¤è¯**: [Supabase](https://supabase.com/) (PostgreSQL)
- **UI ç»„ä»¶åº“**: [shadcn/ui](https://ui.shadcn.com/)
- **æ ·å¼**: [Tailwind CSS](https://tailwindcss.com/)
- **å¯è§†åŒ–**: [@xyflow/react](https://reactflow.dev/) (React Flow)
- **å›¾æ ‡**: [Lucide React](https://lucide.dev/)

## ğŸš€ ä¸»è¦åŠŸèƒ½

### 1. æ—è°±æˆå‘˜ç®¡ç† (`/family-tree`)
- **åˆ—è¡¨å±•ç¤º**: åˆ†é¡µæ˜¾ç¤ºå®¶æ—æˆå‘˜åˆ—è¡¨ã€‚
- **æœç´¢**: æ”¯æŒæŒ‰å§“åå®æ—¶æœç´¢æˆå‘˜ã€‚
- **ç¼–è¾‘/æ·»åŠ **: å®Œæ•´çš„è¡¨å•æ”¯æŒï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯ã€çˆ¶æ¯å…³è”ã€é…å¶ç­‰ã€‚
- **åˆ é™¤**: æ”¯æŒæ‰¹é‡æ“ä½œã€‚

### 2. æ—è°±å¯è§†åŒ– (`/family-tree/graph`)
- **è‡ªåŠ¨å¸ƒå±€**: æ ¹æ® `father_id` å…³ç³»è‡ªåŠ¨ç”Ÿæˆæ ‘å½¢ç»“æ„ã€‚
- **äº¤äº’**: æ”¯æŒç¼©æ”¾ã€æ‹–æ‹½å’Œå¹³ç§»æŸ¥çœ‹ã€‚
- **èŠ‚ç‚¹è¯¦æƒ…**: å±•ç¤ºæˆå‘˜å§“åã€ä»£æ•°ã€é…å¶ç­‰å…³é”®ä¿¡æ¯ã€‚

### 3. ç”¨æˆ·ç³»ç»Ÿ
- **å®‰å…¨è®¤è¯**: å®Œæ•´çš„æ³¨å†Œã€ç™»å½•ã€æ‰¾å›å¯†ç æµç¨‹ã€‚
- **æƒé™æ§åˆ¶**: æ ¸å¿ƒåŠŸèƒ½éœ€ç™»å½•åè®¿é—®ã€‚

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone
cd pure-genealogy
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` (å¦‚æœæ²¡æœ‰åˆ™æ–°å»º) ä¸º `.env.local` å¹¶å¡«å…¥ Supabase é¡¹ç›®é…ç½®ï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=ä½ çš„_Supabase_é¡¹ç›®_URL
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=ä½ çš„_Supabase_Anon_Key
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

åœ¨ Supabase é¡¹ç›®çš„ SQL Editor ä¸­æ‰§è¡Œä»¥ä¸‹ SQL è„šæœ¬ï¼Œåˆ›å»ºå¿…è¦çš„è¡¨ç»“æ„ï¼š

```sql
-- ä½äº .github/family_members.sql
-- åˆ›å»ºå®¶æ—æˆå‘˜è¡¨
CREATE TABLE family_members (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name TEXT NOT NULL,
    generation INTEGER,
    sibling_order INTEGER,
    father_id BIGINT REFERENCES family_members(id),
    gender TEXT CHECK (gender IN ('ç”·', 'å¥³')),
    official_position TEXT,
    is_alive BOOLEAN DEFAULT TRUE,
    spouse TEXT,
    remarks TEXT,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_family_members_father_id ON family_members(father_id);
CREATE INDEX idx_family_members_name ON family_members(name);
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) å³å¯çœ‹åˆ°åº”ç”¨ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
/
â”œâ”€â”€ app/                  # Next.js App Router ç›®å½•
â”‚   â”œâ”€â”€ auth/             # è®¤è¯ç›¸å…³é¡µé¢
â”‚   â”œâ”€â”€ family-tree/      # æ—è°±ç®¡ç†åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ graph/        # æ—è°±å¯è§†åŒ–å›¾è¡¨
â”‚   â”‚   â””â”€â”€ page.tsx      # æˆå‘˜åˆ—è¡¨é¡µ
â”‚   â””â”€â”€ protected/        # å—ä¿æŠ¤çš„ç¤ºä¾‹é¡µé¢
â”œâ”€â”€ components/           # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/               # shadcn/ui é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ ...               # ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ lib/                  # å·¥å…·åº“
â”‚   â””â”€â”€ supabase/         # Supabase å®¢æˆ·ç«¯é…ç½®
â”œâ”€â”€ hooks/                # è‡ªå®šä¹‰ Hooks
â””â”€â”€ public/               # é™æ€èµ„æº
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue æˆ– Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

[MIT](LICENSE)